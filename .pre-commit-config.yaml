# Pre-commit hooks for dev-workflow plugin contributors
# Install: pre-commit install
# Run manually: pre-commit run --all-files

repos:
  - repo: local
    hooks:
      - id: validate-plugin
        name: Validate plugin structure
        entry: ./scripts/validate.sh
        language: script
        pass_filenames: false
        always_run: true

      - id: bats-tests
        name: Run bats tests
        entry: bats tests/
        language: system
        pass_filenames: false
        files: ^(scripts/|tests/|hooks/).*\.(sh|bats|bash)$
        stages: [pre-commit]

      - id: shellcheck
        name: Shellcheck
        entry: shellcheck
        language: system
        types: [shell]
        args: [-e, SC1091]  # Exclude SC1091 (not following sourced files)
        stages: [pre-commit]
